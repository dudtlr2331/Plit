<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_parameter" th:content="${_csrf.parameterName}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title th:text="${clan.name} + ' - ÌÅ¥Îûú Ï†ïÎ≥¥'">ÌÅ¥Îûú Ï†ïÎ≥¥</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/clan.css">
    <link rel="stylesheet" href="/css/common/header.css" />
</head>

<body class="clan-detail">
<!-- ÏÉÅÎã® Ìó§Îçî -->
<div th:replace="~{fo/common/header :: header}"></div>

<!-- ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ Ïª®ÌÖåÏù¥ÎÑà -->
<main class="detail-container">

    <!-- ÏÉÅÎã® Ï†úÎ™© -->
    <div class="detail-header">
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <h1 th:text="${clan.name}" style="margin: 0;">ÌÅ¥Îûú Ïù¥Î¶Ñ</h1>
            <div class="social-links" style="display: flex; gap: 12px;">
                <a th:if="${clan.discordLink != null and !#strings.isEmpty(clan.discordLink)}"
                   th:href="${clan.discordLink}" target="_blank"
                   class="social-button discord-btn">
                    <img src="/images/clan/discord-icon.png" alt="Discord" />
                    <span>ÎîîÏä§ÏΩîÎìú</span>
                </a>

                <a th:if="${clan.kakaoLink != null and !#strings.isEmpty(clan.kakaoLink)}"
                   th:href="${clan.kakaoLink}" target="_blank"
                   class="social-button kakao-btn">
                    <img src="/images/clan/kakao-icon.png" alt="KakaoTalk" />
                    <span>Ïπ¥Ïπ¥Ïò§ÌÜ°</span>
                </a>
            </div>
        </div>
    </div>

    <div class="detail-content">
        <!-- ÌÉ≠ -->
        <div class="clan-tabs">
            <a class="tab tab-btn active" onclick="showTab('intro')">ÏÜåÍ∞ú</a>

            <a class="tab tab-btn"
               th:if="${role == 'LEADER' or role == 'MEMBER' or role == 'GUEST'}"
               onclick="showTab('members')">Î©§Î≤Ñ</a>

            <a class="tab tab-btn"
               th:if="${role == 'LEADER'}"
               onclick="showTab('pending')">
                ÏàòÎùΩ ÎåÄÍ∏∞ Ï§ëÏù∏ Î©§Î≤Ñ
                <span th:if="${pendingCount > 0}" class="badge bg-danger" th:text="${pendingCount}"></span>
            </a>
        </div>

        <div id="memberCountLabel" class="clan-member-count-container hidden">
            <span> ÌÅ¥Îûú Î©§Î≤Ñ Ïàò:
                <strong>
            <span class="member-count-number" th:text="${#lists.size(members)}">0</span>
                </strong>Î™Ö
            </span>
        </div>

        <!-- ÏÜåÍ∞ú ÌÉ≠ -->
        <div class="tab-section" id="intro">
            <div class="detail-image">
                <img th:src="${clan.imageUrl != null ? clan.imageUrl : '/uploads/default.png'}" alt="ÌÅ¥Îûú Ïù¥ÎØ∏ÏßÄ" />
            </div>
            <div class="detail-intro">
                <h2>ÏÜåÍ∞ú</h2>
                <div class="intro-content" th:utext="${clan.intro}"></div>
            </div>
            <div class="detail-tier">
                <h2>Í∞ÄÏûÖ ÏµúÏÜå Ìã∞Ïñ¥</h2>
                <p th:text="${clan.minTier}">Í≥®Îìú</p>
            </div>
        </div>

        <!-- Î©§Î≤Ñ ÌÉ≠ -->
        <div class="tab-section hidden" id="members">

            <div class="member-table">
                <div class="member-row header-row">
                    <div class="member-cell name">ÏÜåÌôòÏÇ¨Î™Ö</div>
                    <div class="member-cell">Ìã∞Ïñ¥</div>
                    <div class="member-cell">Ï£ºÌè¨ÏßÄÏÖò</div>
                    <div class="member-cell">ÏµúÍ∑º Ï±îÌîºÏñ∏</div>
                    <div class="member-cell">ÏäπÎ•†</div>
                    <div class="member-cell">KDA</div>
                    <div class="member-cell">ÏÜåÍ∞ú</div>
                    <div class="member-cell">Í∞ÄÏûÖÏùº</div>
                    <div class="member-cell">Í¥ÄÎ¶¨</div>
                </div>

                <div class="member-row"
                     th:each="member : ${members}"
                     th:classappend="${member.memberId == currentUserId} ? ' current-user'">
                    <!-- ÏÜåÌôòÏÇ¨Î™Ö + Î¶¨Îçî ÏôïÍ¥Ä -->
                    <div class="member-cell name">
                        <strong th:text="${member.nickname}">ÎãâÎÑ§ÏûÑ</strong>
                        <span th:if="${member.role == 'LEADER'}">üëë</span>
                    </div>

                    <!-- Ìã∞Ïñ¥ -->
                    <div class="member-cell" th:text="${member.tier} ?: 'Unranked'">Unranked</div>

                    <!-- Ï£º Ìè¨ÏßÄÏÖò -->
                    <div class="member-cell">
                        <div class="position-icon" th:switch="${member.mainPosition}">

                            <!-- TOP -->
                            <svg th:case="'TOP'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÌÉë">
                                <path d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z" stroke="none"/>
                                <path d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z" class="fill-area"/>
                            </svg>

                            <!-- JUNGLE  -->
                            <svg th:case="'JUNGLE'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="Ï†ïÍ∏Ä"
                                 class="active">
                                <path d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z"
                                      class="fill-area"/>
                            </svg>

                            <!-- MID -->
                            <svg th:case="'MID'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÎØ∏Îìú">
                                <path d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z" />
                                <path class="fill-area" d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z" />
                            </svg>

                            <!-- ADC -->
                            <svg th:case="'ADC'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÏõêÎîú">
                                <path d="M7.828 19H19V7.828l3-3V22H4.828l3-3z" stroke="none" />
                                <path d="M2 2h17.172l-3 3H5v11.172l-3 3V2zM9 9h6v6H9V9z" class="fill-area" />
                            </svg>

                            <!-- SUPPORT -->
                            <svg th:case="'SUPPORT'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÏÑúÌè¨ÌÑ∞"
                                 class="active">
                                <path class="fill-area" d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237z"/>
                                <path class="fill-area" d="M14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255z"/>
                                <path class="fill-area" d="M10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237z"/>
                                <path class="fill-area" d="M9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255z"/>
                                <path class="fill-area" d="M9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z"/>
                            </svg>

                            <!-- ALL ROUND -->
                            <svg th:case="'ALL'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="Ïò¨ÎùºÏö¥Îçî"
                                 class="active">
                                <path class="fill-area" d="M16.2928076,17.0307921 C16.6549683,17.6584306 16.4399705,18.4608135 15.8125108,18.8232841 C15.1844161,19.1872046 14.3817451,18.9719172 14.0194579,18.3440595 L11.8751153,14.6269842 L9.73077279,18.3440595 C9.36848556,18.9719172 8.56581451,19.1872046 7.93795682,18.8249174 C7.31026014,18.4608135 7.09526232,17.6584306 7.45742309,17.0307921 L9.60202464,13.3132678 L5.31251922,13.3132678 C4.58763487,13.3132678 4,12.7256329 4,12.0007486 C4,11.2743674 4.58763487,10.6867325 5.31251922,10.6867325 L9.60202464,10.6867325 L7.45742309,6.96920825 C7.09526232,6.34156972 7.31026014,5.53918682 7.93771981,5.17671625 C8.56581451,4.8127957 9.36848556,5.0280831 9.73077279,5.65594079 L11.8751153,9.37301611 L14.0194579,5.65594079 C14.3817451,5.0280831 15.1844161,4.8127957 15.8122738,5.17508293 C16.4399705,5.53918682 16.6549683,6.34156972 16.2928076,6.96920825 L14.148206,10.6867325 L18.4377114,10.6867325 C19.1625958,10.6867325 19.7502307,11.2743674 19.7502307,11.9992518 C19.7502307,12.7256329 19.1625958,13.3132678 18.4377114,13.3132678 L14.148206,13.3132678 L16.2928076,17.0307921 Z"/>
                            </svg>
                        </div>
                    </div>

                    <!-- ÏµúÍ∑º Ï±îÌîºÏñ∏ -->
                    <div class="member-cell champions">
                        <!-- Ï∂îÌõÑ api -->
                    </div>

                    <!-- ÏäπÎ•† -->
                    <div class="member-cell">--%</div>

                    <!-- KDA -->
                    <div class="member-cell">-- / -- / --</div>

                    <!-- ÏÜåÍ∞úÍ∏Ä -->
                    <div class="member-cell intro"
                         th:text="${#strings.isEmpty(member.intro) ? 'ÏÜåÍ∞úÍ∏Ä ÏóÜÏùå' : member.intro}">
                    </div>
                    <!-- Í∞ÄÏûÖÏùº -->
                    <div class="member-cell" th:text="${member.joinedAgo}">Í∞ÄÏûÖÏùº</div>

                    <!-- Í¥ÄÎ¶¨ -->
                    <div class="member-cell manage-cell"
                         th:if="${role == 'LEADER' and member != null and member.memberId != null and member.role != null and member.role != 'LEADER'}">
                        <button class="btn-small"
                                th:onclick="'delegateLeader(' + ${clan.id} + ', ' + ${member.memberId} + ')'">ÏúÑÏûÑ</button>
                        <button class="btn-small danger"
                                th:onclick="'kickMember(' + ${clan.id} + ', ' + ${member.memberId} + ')'">Ï∂îÎ∞©</button>
                    </div>

                    <!-- Í¥ÄÎ¶¨ -->
                    <div class="member-cell manage-cell"
                         th:if="${member != null and currentUserId != null and member.memberId == currentUserId}">
                        <button class="btn-icon edit-btn"
                                th:attr="data-main-position=${member.mainPosition}"
                                onclick="openEditMemberModalByAttr(this)"
                                title="ÏàòÏ†ï">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 viewBox="0 0 16 16">
                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.207 3.94l-2.5-2.5L13.002.146a.5.5 0 0 1 .706 0l1.793 1.793zM13.5 4.207l-2.5-2.5L4 8.707V11h2.293l7.207-7.207z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

            <!-- ÏàòÎùΩ ÎåÄÍ∏∞ ÌÉ≠ -->
        <div class="tab-section hidden" id="pending">
            <div class="member-table">
                <div class="member-row header-row">
                    <div class="member-cell name">ÏÜåÌôòÏÇ¨Î™Ö</div>
                    <div class="member-cell">Ìã∞Ïñ¥</div>
                    <div class="member-cell">Ï£ºÌè¨ÏßÄÏÖò</div>
                    <div class="member-cell">ÏµúÍ∑º Ï±îÌîºÏñ∏</div>
                    <div class="member-cell">ÏäπÎ•†</div>
                    <div class="member-cell">KDA</div>
                    <div class="member-cell">ÏÜåÍ∞ú</div>
                    <div class="member-cell">Ïã†Ï≤≠Ïùº</div>
                    <div class="member-cell">Í¥ÄÎ¶¨</div>
                </div>

                <div class="member-row" th:if="${#lists.isEmpty(pendingMembers)}"
                     style="display: flex; justify-content: center; align-items: center; height: 80px;">
                    <div style="color: gray; font-weight: normal;">
                        Í∞ÄÏûÖ Ïã†Ï≤≠Ìïú Ïú†Ï†ÄÍ∞Ä ÏóÜÏäµÎãàÎã§.
                    </div>
                </div>

                <div class="member-row" th:each="member : ${pendingMembers}">
                    <!-- ÏÜåÌôòÏÇ¨Î™Ö -->
                    <div class="member-cell name">
                        <strong th:text="${member.nickname}">ÎãâÎÑ§ÏûÑ</strong>
                    </div>

                    <!-- Ìã∞Ïñ¥ -->
                    <div class="member-cell" th:text="${member.tier} ?: 'Unranked'">Unranked</div>

                    <!-- Ï£ºÌè¨ÏßÄÏÖò -->
                    <div class="member-cell">
                        <div class="position-icon" th:switch="${member.mainPosition}">
                            <svg th:case="'TOP'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÌÉë">
                                <path d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z" stroke="none"/>
                                <path d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z" class="fill-area"/>
                            </svg>

                            <!-- JUNGLE  -->
                            <svg th:case="'JUNGLE'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="Ï†ïÍ∏Ä"
                                 class="active">
                                <path d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z"
                                      class="fill-area"/>
                            </svg>

                            <!-- MID -->
                            <svg th:case="'MID'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÎØ∏Îìú">
                                <path d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z" />
                                <path class="fill-area" d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z" />
                            </svg>

                            <!-- ADC -->
                            <svg th:case="'ADC'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÏõêÎîú">
                                <path d="M7.828 19H19V7.828l3-3V22H4.828l3-3z" stroke="none" />
                                <path d="M2 2h17.172l-3 3H5v11.172l-3 3V2zM9 9h6v6H9V9z" class="fill-area" />
                            </svg>

                            <!-- SUPPORT -->
                            <svg th:case="'SUPPORT'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="ÏÑúÌè¨ÌÑ∞"
                                 class="active">
                                <path class="fill-area" d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237z"/>
                                <path class="fill-area" d="M14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255z"/>
                                <path class="fill-area" d="M10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237z"/>
                                <path class="fill-area" d="M9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255z"/>
                                <path class="fill-area" d="M9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z"/>
                            </svg>

                            <!-- ALL ROUND -->
                            <svg th:case="'ALL'" width="24" height="24" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-label="Ïò¨ÎùºÏö¥Îçî"
                                 class="active">
                                <path class="fill-area" d="M16.2928076,17.0307921 C16.6549683,17.6584306 16.4399705,18.4608135 15.8125108,18.8232841 C15.1844161,19.1872046 14.3817451,18.9719172 14.0194579,18.3440595 L11.8751153,14.6269842 L9.73077279,18.3440595 C9.36848556,18.9719172 8.56581451,19.1872046 7.93795682,18.8249174 C7.31026014,18.4608135 7.09526232,17.6584306 7.45742309,17.0307921 L9.60202464,13.3132678 L5.31251922,13.3132678 C4.58763487,13.3132678 4,12.7256329 4,12.0007486 C4,11.2743674 4.58763487,10.6867325 5.31251922,10.6867325 L9.60202464,10.6867325 L7.45742309,6.96920825 C7.09526232,6.34156972 7.31026014,5.53918682 7.93771981,5.17671625 C8.56581451,4.8127957 9.36848556,5.0280831 9.73077279,5.65594079 L11.8751153,9.37301611 L14.0194579,5.65594079 C14.3817451,5.0280831 15.1844161,4.8127957 15.8122738,5.17508293 C16.4399705,5.53918682 16.6549683,6.34156972 16.2928076,6.96920825 L14.148206,10.6867325 L18.4377114,10.6867325 C19.1625958,10.6867325 19.7502307,11.2743674 19.7502307,11.9992518 C19.7502307,12.7256329 19.1625958,13.3132678 18.4377114,13.3132678 L14.148206,13.3132678 L16.2928076,17.0307921 Z"/>
                            </svg>

                        </div>
                    </div>

                    <!-- ÏµúÍ∑º Ï±îÌîºÏñ∏ -->
                    <div class="member-cell champions">
                        <!-- Ï∂îÌõÑ apiÎ°ú ÍµêÏ≤¥ -->
                    </div>

                    <!-- ÏäπÎ•† -->
                    <div class="member-cell">--%</div>

                    <!-- KDA -->
                    <div class="member-cell">-- / -- / --</div>

                    <!-- ÏÜåÍ∞ú -->
                    <div class="member-cell intro"
                         th:text="${#strings.isEmpty(member.intro) ? 'ÏÜåÍ∞úÍ∏Ä ÏóÜÏùå' : member.intro}">ÏÜåÍ∞úÍ∏Ä</div>

                    <!-- Ïã†Ï≤≠Ïùº -->
                    <div class="member-cell"
                         th:text="${member.requestAt != null ? #temporals.format(member.requestAt, '  yyyy-MM-dd') : 'ÎÇ†Ïßú ÏóÜÏùå'}">
                        2025-07-15 15:49
                    </div>

                    <!-- ÏàòÎùΩ/Í±∞Ï†à Î≤ÑÌäº -->
                    <div class="member-cell manage-cell">
                        <button class="btn-small"
                                th:onclick="'approveRequest(' + ${clan.id} + ',' + ${member.userId} + ')'">ÏàòÎùΩ</button>
                        <button class="btn-small danger"
                                th:onclick="'rejectRequest(' + ${clan.id} + ',' + ${member.userId} + ')'">Í±∞Ï†à</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Í≥†Ï†ï ÌïòÎã® Î≤ÑÌäº -->
        <div class="action-buttons-wrapper">
            <div class="action-buttons" id="editButtons">

                <!-- ÌÅ¥Îûú Î¶¨ÎçîÏùº Í≤ΩÏö∞ -->
                <th:block th:if="${role == 'LEADER' and currentUserId == clan.leaderId}">
                    <button type="button" class="btn" onclick="openEditModal()">ÏàòÏ†ï</button>
                    <form method="post" th:action="@{/clan/delete/{id}(id=${clan.id})}" id="deleteForm" style="display:inline;">
                        <button type="button" class="btn" onclick="confirmDelete()">ÏÇ≠Ï†ú</button>
                    </form>
                </th:block>

                <!-- ÌÅ¥Îûú Î©§Î≤ÑÏùº Í≤ΩÏö∞ -->
                <th:block th:if="${role == 'MEMBER'}">
                    <button class="btn danger"
                            th:onclick="'confirmLeaveClan(' + ${clan.id} + ')'">ÌÅ¥Îûú ÌÉàÌá¥</button>
                </th:block>

                <!-- Î°úÍ∑∏Ïù∏, ÎπÑÌöåÏõê-->
                <th:block th:if="${role == 'GUEST'}">
                    <input type="hidden" id="isAuthenticated"
                           th:value="${#authorization.expression('isAuthenticated()') ? 'true' : 'false'}" />
                    <input type="hidden" id="userRole" value="GUEST" />

                    <button th:if="${not joinPending}"
                            class="btn joinClanBtn"
                            onclick="handleJoinClick()">Í∞ÄÏûÖ Ïã†Ï≤≠</button>

                    <button th:if="${joinPending ?: false}"
                            class="btn"
                            disabled style="opacity: 0.5; cursor: not-allowed;">ÏàòÎùΩ ÎåÄÍ∏∞ Ï§ë</button>
                </th:block>

                <button class="btn" onclick="history.back()">Î™©Î°ùÏúºÎ°ú</button>
            </div>
        </div>
    </div>
</main>



<!--Î©§Î≤Ñ ÏàòÏ†ï Î™®Îã¨-->
<div id="editMemberModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeEditMemberModal()">&times;</span>
        <h2>ÏÜåÌôòÏÇ¨ ÏàòÏ†ïÌïòÍ∏∞</h2>

        <div class="member-info">
            <div class="nickname">
                <strong th:text="${editMember != null} ? ${editMember.nickname} : 'ÏÜåÌôòÏÇ¨Î™Ö'">ÏÜåÌôòÏÇ¨Î™Ö</strong>
            </div>
        </div>

        <label>Ï£º Ìè¨ÏßÄÏÖò</label>
        <div class="position-select">

            <!-- Ïò¨ÎùºÏö¥Îçî -->
            <span class="edit-position-btn position-btn" data-position="ALL" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ALL">
        <path class="fill-area emphasis" d="M16.2928,17.0307c0.3621,0.6276 0.1471,1.43 -0.4803,1.7924c-0.6281,0.363 -1.4307,0.1477 -1.7929,-0.48l-2.1443,-3.7171l-2.1443,3.7171c-0.3623,0.6278 -1.1649,0.8431 -1.7929,0.48c-0.6277,-0.3631 -0.8427,-1.1655 -0.4803,-1.7924l2.1446,-3.7172h-4.2896c-0.7249,0 -1.3126,-0.5876 -1.3126,-1.3126c0,-0.7263 0.5876,-1.3137 1.3126,-1.3137h4.2896l-2.1446,-3.7172c-0.3624,-0.6277 -0.1474,-1.43 0.4803,-1.7924c0.6279,-0.3633 1.4306,-0.148 1.7929,0.48l2.1443,3.7172l2.1443,-3.7172c0.3624,-0.6277 1.1649,-0.843 1.7929,-0.48c0.6281,0.3633 0.8431,1.1647 0.4803,1.7924l-2.1446,3.7172h4.2896c0.7249,0 1.3126,0.5876 1.3126,1.3126c0,0.725 -0.5877,1.3131 -1.3126,1.3131h-4.2896l2.1446,3.7172z"/>
      </svg>
    </div>
  </span>

            <!-- ÌÉë -->
            <span class="edit-position-btn position-btn" data-position="TOP" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="TOP">
        <path class="fill-area emphasis" d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z" stroke="none"/>
        <path class="fill-area" d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z"/>
      </svg>
    </div>
  </span>

            <!-- Ï†ïÍ∏Ä  -->
            <span class="edit-position-btn position-btn" data-position="JUNGLE" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="JUNGLE">
        <path class="fill-area emphasis" d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z"/>
      </svg>
    </div>
  </span>

            <!-- ÎØ∏Îìú -->
            <span class="edit-position-btn position-btn" data-position="MID" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="MID">
        <path class="fill-area emphasis" d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z"/>
        <path class="fill-area " d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z"/>
      </svg>
    </div>
  </span>

            <!-- ÏõêÎîú -->
            <span class="edit-position-btn position-btn" data-position="ADC" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ADC">
        <path class="fill-area emphasis" d="M7.828 19H19V7.828l3-3V22H4.828l3-3z" stroke="none"/>
        <path class="fill-area " d="M2 2h17.172l-3 3H5v11.172l-3 3V2zM9 9h6v6H9V9z"/>
      </svg>
    </div>
  </span>

            <!-- ÏÑúÌè¨ÌÑ∞ -->
            <span class="edit-position-btn position-btn" data-position="SUPPORT" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="SUPPORT">
        <path class="fill-area emphasis" d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237z"/>
        <path class="fill-area emphasis" d="M14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255z"/>
        <path class="fill-area emphasis" d="M10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237z"/>
        <path class="fill-area emphasis" d="M9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255z"/>
        <path class="fill-area emphasis" d="M9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z"/>
      </svg>
    </div>
  </span>

        </div>

        <label>ÏÜåÍ∞ú</label>

        <textarea id="memberIntro"
                  name="intro"
                  maxlength="15"
                  placeholder="ÎÇòÎ•º ÏÜåÍ∞úÌï¥Ï£ºÏÑ∏Ïöî. ÏµúÎåÄ 15ÏûêÍπåÏßÄ Í∞ÄÎä•Ìï©ÎãàÎã§."
                  th:if="${editMember != null}"
                  th:text="${#strings.isEmpty(editMember.intro) ? '' : editMember.intro}">
</textarea>


        <input type="hidden" id="clanId" th:value="${clan.id}" />
        <input type="hidden" id="csrfToken" th:value="${_csrf.token}" />
        <input type="hidden" id="csrfHeader" th:value="${_csrf.headerName}" />

        <div class="modal-actions">
            <button class="btn" onclick="submitMemberEdit()">ÏàòÏ†ï</button>
            <button class="btn cancel" onclick="closeEditMemberModal()">Ï∑®ÏÜå</button>
        </div>
    </div>
</div>

<!-- ÌÅ¥Îûú ÏàòÏ†ï Î™®Îã¨ -->
<div id="editClanModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeEditModal()">&times;</span>
        <h2>ÌÅ¥Îûú Ï†ïÎ≥¥ ÏàòÏ†ï</h2>
        <form method="post" th:action="@{/clan/edit/{id}(id=${clan.id})}" enctype="multipart/form-data">
            <div style="margin-bottom: 10px;">
                <label>ÌÅ¥Îûú Ïù¥Î¶Ñ</label>
                <div style="padding: 10px; background-color: #eee; border-radius: 4px;">
                    <span th:text="${clan.name}">ÌÅ¥Îûú Ïù¥Î¶Ñ</span>
                </div>
            </div>

            <label>Ïù¥ÎØ∏ÏßÄ</label>
            <input type="file" name="imageFile" accept="image/*" onchange="validateImageRatio(event)" style="margin-bottom: 10px;" />
            <img id="imagePreview" style="max-width: 100%; margin-bottom: 10px;" />

            <div style="font-size: 13px; color: gray; margin-bottom: 20px; line-height: 1.5;">
                <p style="margin: 0;">Ïù¥ÎØ∏ÏßÄÎäî <strong>4:3 ÎπÑÏú®</strong> (Ïòà: <strong>800√ó600</strong>)Î°ú Îì±Î°ùÌïòÎäî Í≤ÉÏù¥ Í∞ÄÏû• ÏòàÏÅòÍ≤å Î≥¥Ïó¨Ïöî.</p>
                <p style="margin: 4px 0 0 0;">ÎÑàÎ¨¥ Í∏∏Í±∞ÎÇò Ï†ïÏÇ¨Í∞ÅÌòïÏóê Í∞ÄÍπåÏö¥ Ïù¥ÎØ∏ÏßÄÎäî ÌôîÎ©¥ÏóêÏÑú Íπ®Ï†∏ Î≥¥Ïùº Ïàò ÏûàÏñ¥Ïöî!</p>
            </div>

            <textarea name="intro" placeholder="ÌÅ¥Îûú ÏÜåÍ∞ú" required th:text="${clan.intro}"></textarea>

            <label>ÏµúÏÜå Ìã∞Ïñ¥</label>
            <select name="minTier" required>
                <option value="ÏÉÅÍ¥ÄÏóÜÏùå" th:selected="${clan.minTier == 'ÏÉÅÍ¥ÄÏóÜÏùå'}">Ìã∞Ïñ¥ Ï†úÌïú ÏóÜÏùå</option>
                <option value="ÏïÑÏù¥Ïñ∏" th:selected="${clan.minTier == 'ÏïÑÏù¥Ïñ∏'}">ÏïÑÏù¥Ïñ∏+</option>
                <option value="Î∏åÎ°†Ï¶à" th:selected="${clan.minTier == 'Î∏åÎ°†Ï¶à'}">Î∏åÎ°†Ï¶à+</option>
                <option value="Ïã§Î≤Ñ" th:selected="${clan.minTier == 'Ïã§Î≤Ñ'}">Ïã§Î≤Ñ+</option>
                <option value="Í≥®Îìú" th:selected="${clan.minTier == 'Í≥®Îìú'}">Í≥®Îìú+</option>
                <option value="ÌîåÎ†àÌã∞ÎÑò" th:selected="${clan.minTier == 'ÌîåÎ†àÌã∞ÎÑò'}">ÌîåÎ†àÌã∞ÎÑò+</option>
                <option value="ÏóêÎ©îÎûÑÎìú" th:selected="${clan.minTier == 'ÏóêÎ©îÎûÑÎìú'}">ÏóêÎ©îÎûÑÎìú+</option>
                <option value="Îã§Ïù¥ÏïÑ" th:selected="${clan.minTier == 'Îã§Ïù¥ÏïÑ'}">Îã§Ïù¥ÏïÑ+</option>
                <option value="ÎßàÏä§ÌÑ∞" th:selected="${clan.minTier == 'ÎßàÏä§ÌÑ∞'}">ÎßàÏä§ÌÑ∞+</option>
                <option value="Í∑∏ÎûúÎìúÎßàÏä§ÌÑ∞" th:selected="${clan.minTier == 'Í∑∏ÎûúÎìúÎßàÏä§ÌÑ∞'}">Í∑∏ÎûúÎìúÎßàÏä§ÌÑ∞+</option>
                <option value="Ï±åÎ¶∞Ï†Ä" th:selected="${clan.minTier == 'Ï±åÎ¶∞Ï†Ä'}">Ï±åÎ¶∞Ï†Ä</option>
            </select>

            <label>ÎîîÏä§ÏΩîÎìú ÎßÅÌÅ¨</label>
            <input type="url" name="discordLink" th:value="${clan.discordLink}" />

            <label>Ïπ¥Ïπ¥Ïò§ ÎßÅÌÅ¨</label>
            <input type="url" name="kakaoLink" th:value="${clan.kakaoLink}" />

            <div class="modal-actions">
                <button type="submit" class="btn">ÏàòÏ†ïÏôÑÎ£å</button>
                <button type="button" class="btn cancel" onclick="closeEditModal()">Ï∑®ÏÜå</button>
            </div>
        </form>
    </div>
</div>


<!-- Í∞ÄÏûÖ Ïã†Ï≤≠ Î™®Îã¨ -->
<div id="joinClanModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeJoinClanModal()">&times;</span>
        <h2>ÌÅ¥Îûú Í∞ÄÏûÖ Ïã†Ï≤≠</h2>

        <!-- ÎãâÎÑ§ÏûÑ ÌëúÏãú -->
        <div class="member-info">
            <div class="nickname">
                <strong th:text="${nickname}">ÎÇ¥ ÎãâÎÑ§ÏûÑ</strong>
            </div>
        </div>

        <!-- Ìè¨ÏßÄÏÖò ÏÑ†ÌÉù -->
        <label>Ï£º Ìè¨ÏßÄÏÖò</label>
        <div class="position-select">

            <!-- Ïò¨ÎùºÏö¥Îçî -->
            <span class="edit-position-btn position-btn" data-position="ALL" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ALL">
        <path class="fill-area emphasis" d="M16.2928,17.0307c0.3621,0.6276 0.1471,1.43 -0.4803,1.7924c-0.6281,0.363 -1.4307,0.1477 -1.7929,-0.48l-2.1443,-3.7171l-2.1443,3.7171c-0.3623,0.6278 -1.1649,0.8431 -1.7929,0.48c-0.6277,-0.3631 -0.8427,-1.1655 -0.4803,-1.7924l2.1446,-3.7172h-4.2896c-0.7249,0 -1.3126,-0.5876 -1.3126,-1.3126c0,-0.7263 0.5876,-1.3137 1.3126,-1.3137h4.2896l-2.1446,-3.7172c-0.3624,-0.6277 -0.1474,-1.43 0.4803,-1.7924c0.6279,-0.3633 1.4306,-0.148 1.7929,0.48l2.1443,3.7172l2.1443,-3.7172c0.3624,-0.6277 1.1649,-0.843 1.7929,-0.48c0.6281,0.3633 0.8431,1.1647 0.4803,1.7924l-2.1446,3.7172h4.2896c0.7249,0 1.3126,0.5876 1.3126,1.3126c0,0.725 -0.5877,1.3131 -1.3126,1.3131h-4.2896l2.1446,3.7172z"/>
      </svg>
    </div>
  </span>

            <!-- ÌÉë -->
            <span class="edit-position-btn position-btn" data-position="TOP" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="TOP">
        <path class="fill-area emphasis" d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z" stroke="none"/>
        <path class="fill-area" d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z"/>
      </svg>
    </div>
  </span>

            <!-- Ï†ïÍ∏Ä -->
            <span class="edit-position-btn position-btn" data-position="JUNGLE" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="JUNGLE">
        <path class="fill-area emphasis" d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z"/>
      </svg>
    </div>
  </span>

            <!-- ÎØ∏Îìú -->
            <span class="edit-position-btn position-btn" data-position="MID" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="MID">
        <path class="fill-area emphasis" d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z"/>
        <path class="fill-area " d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z"/>
      </svg>
    </div>
  </span>

            <!-- ÏõêÎîú -->
            <span class="edit-position-btn position-btn" data-position="ADC" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ADC">
        <path class="fill-area emphasis" d="M7.828 19H19V7.828l3-3V22H4.828l3-3z" stroke="none"/>
        <path class="fill-area " d="M2 2h17.172l-3 3H5v11.172l-3 3V2zM9 9h6v6H9V9z"/>
      </svg>
    </div>
  </span>

            <!-- ÏÑúÌè¨ÌÑ∞ -->
            <span class="edit-position-btn position-btn" data-position="SUPPORT" onclick="selectPosition(this)">
    <div class="position-icon">
      <svg width="28" height="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="SUPPORT">
        <path class="fill-area emphasis" d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237z"/>
        <path class="fill-area emphasis" d="M14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255z"/>
        <path class="fill-area emphasis" d="M10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237z"/>
        <path class="fill-area emphasis" d="M9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255z"/>
        <path class="fill-area emphasis" d="M9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z"/>
      </svg>
    </div>
  </span>

        </div>

        <!-- ÏÜåÍ∞úÍ∏Ä ÏûÖÎ†•Ï∞Ω -->
        <label>ÏÜåÍ∞ú</label>
        <textarea id="joinIntro"
                  name="intro"
                  maxlength="14"
                  placeholder="ÎÇòÎ•º ÏÜåÍ∞úÌï¥Ï£ºÏÑ∏Ïöî. ÏµúÎåÄ 14ÏûêÍπåÏßÄ Í∞ÄÎä•Ìï©ÎãàÎã§."></textarea>

        <!-- ÌÅ¥Îûú ID Ïà®ÍπÄ -->
        <input type="hidden" id="joinClanId" th:value="${clan.id}" />

        <!-- Î≤ÑÌäº -->
        <div class="modal-actions">
            <button class="btn" onclick="submitJoinRequest()">Í∞ÄÏûÖ Ïã†Ï≤≠</button>
            <button class="btn cancel" onclick="closeJoinClanModal()">Ï∑®ÏÜå</button>
        </div>
    </div>
</div>

<!-- Ìë∏ÌÑ∞ -->
<!--<footer>-->
<!--    <div class="container">-->
<!--        <div class="footer-nav">-->
<!--            <a href="#">Í≥µÏßÄÏÇ¨Ìï≠</a>-->
<!--            <a href="#">ÏÇ¨Ïö©Î∞©Î≤ï</a>-->
<!--            <a href="#">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</a>-->
<!--            <a href="#">Í¥ëÍ≥†/Ï†úÌú¥Î¨∏Ïùò</a>-->
<!--            <a href="#">Í∞úÎ∞úÎ¨∏Ïùò</a>-->
<!--            <a href="#">404 Squad</a>-->
<!--        </div>-->
<!--        <div>-->
<!--            lol.ps is hosted by PS Analytics, Inc. This site isn't endorsed by Riot Games and doesn‚Äôt reflect their views.-->
<!--            League of Legends is a trademark of Riot Games.-->
<!--        </div>-->
<!--    </div>-->
<!--</footer>-->

<script src="/js/clan.js"></script>
</body>
</html>