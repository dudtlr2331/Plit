<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_parameter" th:content="${_csrf.parameterName}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title th:text="${clan.name} + ' - í´ëœ ì •ë³´'">í´ëœ ì •ë³´</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/clan.css">
</head>
<body>

<!-- ìƒë‹¨ í—¤ë” -->
<div th:replace="~{fo/common/header :: header}"></div>

<!-- ìƒì„¸ í˜ì´ì§€ ì»¨í…Œì´ë„ˆ -->
<main class="detail-container">
    <!-- ìƒë‹¨ ì œëª© -->
    <div class="detail-header">
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <h1 th:text="${clan.name}" style="margin: 0;">í´ëœ ì´ë¦„</h1>
            <div class="social-links" style="display: flex; gap: 12px;">
                <a th:if="${clan.discordLink != null}" th:href="${clan.discordLink}" target="_blank">
                    <img src="/images/clan/discord-icon.png" alt="Discord" class="clan-social-icon" />
                </a>
                <a th:if="${clan.kakaoLink != null}" th:href="${clan.kakaoLink}" target="_blank">
                    <img src="/images/clan/kakao-icon.png" alt="KakaoTalk" class="clan-social-icon" />
                </a>
            </div>
        </div>
    </div>

    <div class="detail-content">
        <!-- íƒ­ -->
        <div class="clan-tabs">
            <a class="tab tab-btn active" onclick="showTab('intro')">ì†Œê°œ</a>
            <th:block th:if="${role == 'LEADER'}">
                <a class="tab tab-btn" onclick="showTab('members')">ë©¤ë²„</a>
                <a class="tab tab-btn" onclick="showTab('pending')">ìˆ˜ë½ ëŒ€ê¸° ì¤‘ì¸ ë©¤ë²„</a>
            </th:block>
        </div>

        <!-- ì†Œê°œ íƒ­ -->
        <div class="tab-section" id="intro">
            <div class="detail-image">
                <img th:src="${clan.imageUrl != null ? clan.imageUrl : '/uploads/default.png'}" alt="í´ëœ ì´ë¯¸ì§€" />
            </div>
            <div class="detail-intro">
                <h2>ì†Œê°œ</h2>
                <div class="intro-content" th:utext="${clan.intro}"></div>
            </div>
            <div class="detail-tier">
                <h2>ê°€ì… ìµœì†Œ í‹°ì–´</h2>
                <p th:text="${clan.minTier}">ê³¨ë“œ</p>
            </div>
        </div>

        <!-- ë©¤ë²„ íƒ­ -->
        <div class="tab-section hidden" id="members">
            <div class="member-table">
                <div class="member-row header-row">
                    <div class="member-cell name">ì†Œí™˜ì‚¬ëª…</div>
                    <div class="member-cell">í‹°ì–´</div>
                    <div class="member-cell">ì£¼í¬ì§€ì…˜</div>
                    <div class="member-cell">ìµœê·¼ ì±”í”¼ì–¸</div>
                    <div class="member-cell">ìŠ¹ë¥ </div>
                    <div class="member-cell">KDA</div>
                    <div class="member-cell">ì†Œê°œ</div>
                    <div class="member-cell">ê°€ì…ì¼</div>
                    <div class="member-cell">ê´€ë¦¬</div>
                </div>

                <!-- ë°˜ë³µë¬¸ ì‹œì‘ -->
                <div class="member-row" th:each="member : ${members}">
                    <!-- ì†Œí™˜ì‚¬ëª… + ë¦¬ë” ì™•ê´€ -->
                    <div class="member-cell name">
                        <strong th:text="${member.nickname}">ë‹‰ë„¤ì„</strong>
                        <span th:if="${member.role == 'LEADER'}">ğŸ‘‘</span>
                    </div>

                    <!-- í‹°ì–´ -->
                    <div class="member-cell" th:text="${member.tier} ?: 'Unranked'">Unranked</div>

                    <!-- ì£¼ í¬ì§€ì…˜ -->
                    <div class="member-cell">
                        <div class="position-icon" th:switch="${member.mainPosition}">
                            <!-- íƒ‘ -->
                            <svg th:case="'TOP'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="íƒ‘">
                                <path d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z" stroke="black" stroke-width="1.5" fill="none"/>
                                <path d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z" fill="black"/>
                            </svg>

                            <!-- ì •ê¸€ -->
                            <svg th:case="'JUNGLE'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="ì •ê¸€">
                                <path d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z" fill="black"/>
                            </svg>

                            <!-- ë¯¸ë“œ -->
                            <svg th:case="'MID'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="ë¯¸ë“œ">
                                <path d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z" fill="black"/>
                                <path d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z" fill="black"/>
                            </svg>

                            <!-- ì›ë”œ -->
                            <svg th:case="'ADC'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="ì›ë”œ">
                                <path d="M7.828 19H19V7.828l3-3V22H4.828l3-3z" fill="black"/>
                                <path d="M2 2h17.172l-3 3H5v11.172l-3 3V2zm7 13h6V9H9v6z" fill="black"/>
                            </svg>

                            <!-- ì„œí¬í„° -->
                            <svg th:case="'SUPPORT'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="ì„œí¬í„°">
                                <path d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237zM14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255zM10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237zM9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255zM9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z" fill="black"/>
                            </svg>

                            <!-- ê·¸ ì™¸ -->
                            <span th:case="*">-</span>
                        </div>
                    </div>

                    <!-- ìµœê·¼ ì±”í”¼ì–¸ -->
                    <div class="member-cell champions">
                        <!-- ì¶”í›„ ì´ë¯¸ì§€ ì‚½ì… -->
                    </div>

                    <!-- ìŠ¹ë¥  -->
                    <div class="member-cell">--%</div>

                    <!-- KDA -->
                    <div class="member-cell">-- / -- / --</div>

                    <!-- ì†Œê°œê¸€ -->
                    <div class="member-cell">ì†Œê°œê¸€ ìë¦¬</div>

                    <!-- ê°€ì…ì¼ -->
                    <div class="member-cell">3ì¼ ì „</div>

                    <!-- ê´€ë¦¬ -->
                    <div class="member-cell" th:if="${member.role != 'LEADER'}">
                        <button class="btn-small">ìœ„ì„</button>
                        <button class="btn-small danger">ì¶”ë°©</button>
                    </div>
                    <!-- ê´€ë¦¬ -->
                    <div class="member-cell" th:if="${member.role == 'LEADER'}">
                        <button class="btn-icon edit-btn" onclick="openEditMemberModal('${member.mainPosition}')" title="ìˆ˜ì •">âœï¸</button>
                    </div>
                </div>
                <!-- ë°˜ë³µë¬¸ ë -->
            </div>
        </div>

        <!-- ìˆ˜ë½ ëŒ€ê¸° íƒ­ -->
        <div class="tab-section hidden" id="pending">
            <ul>
                <li th:each="pending : ${pendingMembers}">
                    <strong th:text="${pending.nickname}">ë‹‰ë„¤ì„</strong>
                    <span th:text="'[' + pending.tier + ']'">[í‹°ì–´]</span>
                    <span style="color: orange;">ìˆ˜ë½ ëŒ€ê¸°</span>
                </li>
            </ul>
        </div>

        <!-- ê³ ì • í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="action-buttons" id="editButtons">
            <th:block th:if="${role == 'LEADER'}">
                <button type="button" class="btn" onclick="openEditModal()">ìˆ˜ì •</button>
                <form id="deleteForm" method="post" th:action="@{/clan/delete/{id}(id=${clan.id})}">
                    <button type="button" class="btn" onclick="confirmDelete()">ì‚­ì œ</button>
                </form>
            </th:block>

            <th:block th:if="${role == 'MEMBER'}">
                <button class="btn">í´ëœ íƒˆí‡´</button>
            </th:block>

            <th:block th:if="${role == 'GUEST'}">
                <button class="btn">ê°€ì… ì‹ ì²­</button>
            </th:block>
        </div>
    </div>
</main>


<!--ë©¤ë²„ ìˆ˜ì • ëª¨ë‹¬-->
<div id="editMemberModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeEditMemberModal()">&times;</span>
        <h2>ì†Œí™˜ì‚¬ ìˆ˜ì •í•˜ê¸°</h2>

        <div class="member-info">
            <div class="nickname">
                <strong th:text="${editMember != null} ? ${editMember.nickname} : 'ì†Œí™˜ì‚¬ëª…'">ì†Œí™˜ì‚¬ëª…</strong>
<!--                <span class="tag" th:text="${editMember != null} ? '#' + ${editMember.tag} : '#0000'">#0000</span>-->
            </div>
        </div>

        <label>ì£¼ í¬ì§€ì…˜</label>
        <div class="position-select">
    <span class="position-btn" data-position="ALL" title="ì „ì²´" onclick="selectPosition(this)">
        <!-- ì „ì²´ ì•„ì´ì½˜ (ë„ˆê°€ ì˜¬ë ¤ì¤€ ê²ƒ) -->
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ì „ì²´" width="32" height="32" fill="black">
            <path d="M16.2928,17.0307c0.3621,0.6276 0.1471,1.43 -0.4803,1.7924c-0.6281,0.363 -1.4307,0.1477 -1.7929,-0.48l-2.1443,-3.7171l-2.1443,3.7171c-0.3623,0.6278 -1.1649,0.8431 -1.7929,0.48c-0.6277,-0.3631 -0.8427,-1.1655 -0.4803,-1.7924l2.1446,-3.7172h-4.2896c-0.7249,0 -1.3126,-0.5876 -1.3126,-1.3126c0,-0.7263 0.5876,-1.3137 1.3126,-1.3137h4.2896l-2.1446,-3.7172c-0.3624,-0.6277 -0.1474,-1.43 0.4803,-1.7924c0.6279,-0.3633 1.4306,-0.148 1.7929,0.48l2.1443,3.7172l2.1443,-3.7172c0.3624,-0.6277 1.1649,-0.843 1.7929,-0.48c0.6281,0.3633 0.8431,1.1647 0.4803,1.7924l-2.1446,3.7172h4.2896c0.7249,0 1.3126,0.5876 1.3126,1.3126c0,0.725  -0.5877,1.3131 -1.3126,1.3131h-4.2896l2.1446,3.7172z"></path>
        </svg>
    </span>
            <span class="position-btn" data-position="TOP" title="íƒ‘" onclick="selectPosition(this)">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="íƒ‘" width="32" height="32" fill="black">
            <path d="M16.172 5H5v11.172l-3 3V2h17.172l-3 3z"></path>
            <path d="M22 22H4.828l3-3H19V7.828l3-3V22zM15 9H9v6h6V9z"></path>
        </svg>
    </span>
            <span class="position-btn" data-position="JUNGLE" title="ì •ê¸€" onclick="selectPosition(this)">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ì •ê¸€" width="32" height="32" fill="black">
            <path d="M5.094 0c9.247 11.173 8.508 20.655 6.983 24-3.853-4.623-6.261-6.368-6.983-6.662C4.708 10.788 2.204 7.652 1 6.903c4.752 1.734 6.903 5.512 7.385 7.184C9.09 8.532 6.485 2.381 5.094 0zM15.569 18.22v2.57l3.451-3.452c0-5.651 2.622-9.311 3.933-10.435-4.816 2.312-6.93 8.508-7.384 11.318zM15.569 12.04l-.803 2.248C14.509 12.49 13.482 10.38 13 9.552 14.605 5.763 17.522 1.605 18.78 0c-2.505 5.137-3.185 10.167-3.211 12.04z"></path>
        </svg>
    </span>
            <span class="position-btn" data-position="MID" title="ë¯¸ë“œ" onclick="selectPosition(this)">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ë¯¸ë“œ" width="32" height="32" fill="black">
            <path d="M22 2h-2.906L2 19.094V22h3.063L22 5.062V2z"></path>
            <path d="M5 13.478l-3 3V2h14.478l-3 3H5v8.478zM19 10.819l3-3V22H7.82l3-3H19v-8.181z"></path>
        </svg>
    </span>
            <span class="position-btn" data-position="ADC" title="ì›ë”œ" onclick="selectPosition(this)">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ì›ë”œ" width="32" height="32" fill="black">
            <path d="M7.828 19H19V7.828l3-3V22H4.828l3-3z"></path>
            <path d="M2 2h17.172l-3 3H5v11.172l-3 3V2zm7 13h6V9H9v6z"></path>
        </svg>
    </span>
            <span class="position-btn" data-position="SUPPORT" title="ì„œí¬í„°" onclick="selectPosition(this)">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="ì„œí¬í„°" width="32" height="32" fill="black">
            <path d="M13.991 8.327l2.248-2.036H24c-2.553 2.327-4.69 2.86-5.44 2.836h-1.45l2.03 2.91-3.553 1.527-1.596-5.237zM14.644 19.745L12.758 9.127l-.798.946V22l2.684-2.255zM10.009 8.327L7.76 6.291H0c2.553 2.327 4.69 2.86 5.44 2.836h1.45l-2.03 2.91 3.553 1.527 1.596-5.237zM9.277 19.745l1.886-10.618.797.946V22l-2.683-2.255zM9.048 2L8.25 3.382 11.876 7.6l3.627-4.218L14.56 2H9.048z"></path>
        </svg>
    </span>
        </div>

        <label>ì†Œê°œ</label>
        <textarea id="memberIntro" placeholder="ë‚˜ë¥¼ ì†Œê°œí•´ì£¼ì„¸ìš”." th:text="${editMember != null} ? ${editMember.intro} : ''"></textarea>

        <div class="modal-actions">
            <button class="btn" onclick="submitMemberEdit()">ìˆ˜ì •</button>
            <button class="btn" onclick="closeEditMemberModal()">ì·¨ì†Œ</button>
        </div>
    </div>
</div>

<!-- í´ëœ ìˆ˜ì • ëª¨ë‹¬ -->
<div id="editClanModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeEditModal()">&times;</span>
        <h2>í´ëœ ì •ë³´ ìˆ˜ì •</h2>
        <form method="post" th:action="@{/clan/edit/{id}(id=${clan.id})}" enctype="multipart/form-data">
            <div style="margin-bottom: 10px;">
                <label>í´ëœ ì´ë¦„</label>
                <div style="padding: 10px; background-color: #eee; border-radius: 4px;">
                    <span th:text="${clan.name}">í´ëœ ì´ë¦„</span>
                </div>
            </div>

            <label>ì´ë¯¸ì§€</label>
            <input type="file" name="imageFile" accept="image/*" onchange="validateImageRatio(event)" style="margin-bottom: 10px;" />
            <img id="imagePreview" style="max-width: 100%; margin-bottom: 10px;" />

            <div style="font-size: 13px; color: gray; margin-bottom: 20px; line-height: 1.5;">
                <p style="margin: 0;">ì´ë¯¸ì§€ëŠ” <strong>4:3 ë¹„ìœ¨</strong> (ì˜ˆ: <strong>800Ã—600</strong>)ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì˜ˆì˜ê²Œ ë³´ì—¬ìš”.</p>
                <p style="margin: 4px 0 0 0;">ë„ˆë¬´ ê¸¸ê±°ë‚˜ ì •ì‚¬ê°í˜•ì— ê°€ê¹Œìš´ ì´ë¯¸ì§€ëŠ” í™”ë©´ì—ì„œ ê¹¨ì ¸ ë³´ì¼ ìˆ˜ ìˆì–´ìš”!</p>
            </div>

            <textarea name="intro" placeholder="í´ëœ ì†Œê°œ" required th:text="${clan.intro}"></textarea>

            <label>ìµœì†Œ í‹°ì–´</label>
            <select name="minTier" required>
                <option value="ìƒê´€ì—†ìŒ" th:selected="${clan.minTier == 'ìƒê´€ì—†ìŒ'}">ìƒê´€ ì—†ìŒ</option>
                <option value="ì•„ì´ì–¸" th:selected="${clan.minTier == 'ì•„ì´ì–¸'}">ì•„ì´ì–¸</option>
                <option value="ë¸Œë¡ ì¦ˆ" th:selected="${clan.minTier == 'ë¸Œë¡ ì¦ˆ'}">ë¸Œë¡ ì¦ˆ</option>
                <option value="ì‹¤ë²„" th:selected="${clan.minTier == 'ì‹¤ë²„'}">ì‹¤ë²„</option>
                <option value="ê³¨ë“œ" th:selected="${clan.minTier == 'ê³¨ë“œ'}">ê³¨ë“œ</option>
                <option value="í”Œë ˆí‹°ë„˜" th:selected="${clan.minTier == 'í”Œë ˆí‹°ë„˜'}">í”Œë ˆí‹°ë„˜</option>
                <option value="ì—ë©”ë„ë“œ" th:selected="${clan.minTier == 'ì—ë©”ë„ë“œ'}">ì—ë©”ë„ë“œ</option>
                <option value="ë‹¤ì´ì•„" th:selected="${clan.minTier == 'ë‹¤ì´ì•„'}">ë‹¤ì´ì•„</option>
                <option value="ë§ˆìŠ¤í„°" th:selected="${clan.minTier == 'ë§ˆìŠ¤í„°'}">ë§ˆìŠ¤í„°</option>
                <option value="ê·¸ëœë“œë§ˆìŠ¤í„°" th:selected="${clan.minTier == 'ê·¸ëœë“œë§ˆìŠ¤í„°'}">ê·¸ëœë“œë§ˆìŠ¤í„°</option>
                <option value="ì±Œë¦°ì €" th:selected="${clan.minTier == 'ì±Œë¦°ì €'}">ì±Œë¦°ì €</option>
            </select>

            <label>ë””ìŠ¤ì½”ë“œ ë§í¬</label>
            <input type="url" name="discordLink" th:value="${clan.discordLink}" />

            <label>ì¹´ì¹´ì˜¤ ë§í¬</label>
            <input type="url" name="kakaoLink" th:value="${clan.kakaoLink}" />

            <div style="text-align: right; margin-top: 16px;">
                <button type="submit" class="btn">ìˆ˜ì •ì™„ë£Œ</button>
                <button type="button" class="btn" onclick="closeEditModal()">ì·¨ì†Œ</button>
            </div>
        </form>
    </div>
</div>

<!-- í‘¸í„° -->
<footer>
    <div class="container">
        <div class="footer-nav">
            <a href="#">ê³µì§€ì‚¬í•­</a>
            <a href="#">ì‚¬ìš©ë°©ë²•</a>
            <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
            <a href="#">ê´‘ê³ /ì œíœ´ë¬¸ì˜</a>
            <a href="#">ê°œë°œë¬¸ì˜</a>
            <a href="#">404 Squad</a>
        </div>
        <div>
            lol.ps is hosted by PS Analytics, Inc. This site isn't endorsed by Riot Games and doesnâ€™t reflect their views.
            League of Legends is a trademark of Riot Games.
        </div>
    </div>
</footer>

<script>
    function toggleChatList() {
        alert('ì±„íŒ… ë¦¬ìŠ¤íŠ¸ ì—´ê¸° êµ¬í˜„ í•„ìš”');
    }

    function showTab(tab) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-section').forEach(section => section.classList.add('hidden'));
        document.querySelector(`.tab-btn[onclick*='${tab}']`).classList.add('active');
        document.getElementById(tab).classList.remove('hidden');

        const actionButtons = document.getElementById('editButtons');
        if (tab === 'intro') {
            actionButtons.style.display = 'block';
        } else {
            actionButtons.style.display = 'none';
        }
    }

    function confirmDelete() {
        const isSure = confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
        if (isSure) {
            document.getElementById("deleteForm").submit();
        }
    }

    function openEditModal() {
        const modal = document.getElementById("editClanModal");
        modal.style.display = "flex";
        modal.style.justifyContent = "center";
        modal.style.alignItems = "center";
    }

    function closeEditModal() {
        const modal = document.getElementById("editClanModal");
        modal.style.display = "none";
    }

    function validateImageRatio(event) {
        const file = event.target.files[0];
        if (!file) return;

        const img = new Image();
        const reader = new FileReader();

        reader.onload = function (e) {
            img.src = e.target.result;
        };

        img.onload = function () {
            const width = img.width;
            const height = img.height;
            const ratio = width / height;

            const minRatio = 0.5;
            const maxRatio = 2.5;

            if (ratio < minRatio || ratio > maxRatio) {
                alert("ì—…ë¡œë“œ ì „ ì´ë¯¸ì§€ ë¹„ìœ¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n4:3 ë¹„ìœ¨ ì´ë¯¸ì§€ (ì˜ˆ: 800Ã—600, 1200Ã—900, 1600Ã—1200)ê°€ ê°€ì¥ ì˜ˆì˜ê²Œ ë³´ì—¬ìš”!");
                event.target.value = "";
                document.getElementById("imagePreview").src = "";
            } else {
                document.getElementById("imagePreview").src = img.src;
            }
        };

        reader.readAsDataURL(file);
    }

    // ë©¤ë²„ ìˆ˜ì • ëª¨ë‹¬ ì—´ê¸° - í¬ì§€ì…˜ ê°’ ë°›ì•„ì„œ í™œì„±í™” ì²˜ë¦¬
    function openEditMemberModal(position) {
        const modal = document.getElementById("editMemberModal");

        // ê¸°ì¡´ì— active í´ë˜ìŠ¤ ì œê±°
        document.querySelectorAll(".position-btn").forEach(btn => btn.classList.remove("active"));

        // position ì¸ìì— í•´ë‹¹í•˜ëŠ” ë²„íŠ¼ ì°¾ì•„ active ì¶”ê°€
        if (position) {
            const btn = document.querySelector(`.position-btn[data-position="${position}"]`);
            if (btn) btn.classList.add("active");
        }

        modal.style.display = "flex";
        modal.style.justifyContent = "center";
        modal.style.alignItems = "center";

        // ì„ íƒëœ í¬ì§€ì…˜ ì €ì¥
        selectedPosition = position;
    }

    function closeEditMemberModal() {
        const modal = document.getElementById("editMemberModal");
        modal.style.display = "none";
    }

    // ì£¼í¬ì§€ì…˜ ì„ íƒ
    let selectedPosition = null;
    function selectPosition(element) {
        // ëª¨ë“  ë²„íŠ¼ ì´ˆê¸°í™”
        document.querySelectorAll(".position-btn").forEach(btn => btn.classList.remove("active"));

        // í´ë¦­í•œ ë²„íŠ¼ì—ë§Œ active í´ë˜ìŠ¤ ì¶”ê°€
        element.classList.add("active");

        // ì„ íƒëœ í¬ì§€ì…˜ ì €ì¥ (data-position ì†ì„±ì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°)
        selectedPosition = element.getAttribute("data-position");
    }

    // ë©¤ë²„ ìˆ˜ì • ì œì¶œ
    function submitMemberEdit() {
        const intro = document.getElementById("memberIntro").value;

        console.log("ì„ íƒëœ í¬ì§€ì…˜:", selectedPosition);
        console.log("ì†Œê°œê¸€:", intro);

        alert("ë©¤ë²„ ìˆ˜ì • ì™„ë£Œ (ì„œë²„ ì—°ë™ì€ ì¶”ê°€ êµ¬í˜„ í•„ìš”)");
        closeEditMemberModal();
    }
</script>

</body>
</html>