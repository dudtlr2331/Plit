<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${clan.name} + ' - í´ëœ ì •ë³´'">í´ëœ ì •ë³´</title>
    <link rel="stylesheet" href="/css/clan.css">
</head>
<body>

<!-- ìƒë‹¨ í—¤ë” -->
<header>
    <div class="logo" onclick="location.href='/main'">plit</div>
    <nav>
        <a href="/party">íŒŒí‹°ì°¾ê¸°</a>
        <a href="/record">ë‚´ì „ì°¾ê¸°</a>
        <a href="/clan" style="color: yellow;">í´ëœì°¾ê¸°</a>
        <a href="/report">íŠ¸ë¡¤ì‹ ê³ </a>
    </nav>
    <div style="display: flex; align-items: center; gap: 15px;">
        <div onclick="toggleChatList()" style="cursor: pointer; font-size: 30px;">ğŸ’¬</div>
        <div sec:authorize="isAuthenticated()" style="display: flex; align-items: center; gap: 10px;">
            <span th:text="${#authentication.name} + ' ë‹˜'" style="font-weight: bold;"></span>
            <button onclick="location.href='/mypage'">ë§ˆì´í˜ì´ì§€</button>
            <button onclick="location.href='/logout'">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
        <div sec:authorize="isAnonymous()">
            <button onclick="location.href='/login'">ë¡œê·¸ì¸</button>
        </div>
    </div>
</header>

<!-- ìƒì„¸ í˜ì´ì§€ ì»¨í…Œì´ë„ˆ -->
<main class="detail-container">
    <!-- ìƒë‹¨ ì œëª© -->
    <div class="detail-header">
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <h1 th:text="${clan.name}" style="margin: 0;">í´ëœ ì´ë¦„</h1>
            <div class="social-links" style="display: flex; gap: 12px;">
                <a th:if="${clan.discordLink != null}" th:href="${clan.discordLink}" target="_blank">
                    <img src="/images/clan/discord-icon.png" alt="Discord" class="clan-social-icon"/>
                </a>
                <a th:if="${clan.kakaoLink != null}" th:href="${clan.kakaoLink}" target="_blank">
                    <img src="/images/clan/kakao-icon.png" alt="KakaoTalk" class="clan-social-icon"/>
                </a>
            </div>
        </div>
    </div>

    <!-- ì¤‘ê°„ ë‚´ìš© ì „ì²´ ê°ì‹¸ëŠ” ì˜ì—­ -->
    <div class="detail-content">
        <!-- íƒ­ -->
        <div class="clan-tabs">
            <a class="tab active" href="#">ì†Œê°œ</a>
            <th:block th:if="${role == 'LEADER'}">
                <a class="tab" href="#">ë©¤ë²„</a>
                <a class="tab" href="#">ìˆ˜ë½ ëŒ€ê¸°</a>
            </th:block>
        </div>

        <!-- ì´ë¯¸ì§€ -->
        <div class="detail-image">
            <img th:src="${clan.imageUrl != null ? clan.imageUrl : '/uploads/default.png'}" alt="í´ëœ ì´ë¯¸ì§€">
        </div>

        <!-- ì†Œê°œ -->
        <div class="detail-intro">
            <h2>ì†Œê°œ</h2>
            <div class="intro-content" th:utext="${clan.intro}"></div>
        </div>

        <!-- ìµœì†Œ í‹°ì–´ -->
        <div class="detail-tier">
            <h2>ê°€ì… ìµœì†Œ í‹°ì–´</h2>
            <p th:text="${clan.minTier}">ê³¨ë“œ</p>
        </div>
    </div>

    <!-- ì•„ë˜ ê³ ì • ë²„íŠ¼ -->
    <div class="action-buttons">
        <th:block th:if="${role == 'LEADER'}">
            <a th:href="@{/clan/edit/{id}(id=${clan.id})}" class="btn">ìˆ˜ì •</a>
            <form th:action="@{/clan/delete/{id}(id=${clan.id})}" method="post" style="display: inline;">
                <button type="submit" class="btn">ì‚­ì œ</button>
            </form>
        </th:block>

        <th:block th:if="${role == 'MEMBER'}">
            <button class="btn">í´ëœ íƒˆí‡´</button>
        </th:block>

        <th:block th:if="${role == 'GUEST'}">
            <button class="btn">ê°€ì… ì‹ ì²­</button>
        </th:block>
    </div>
</main>

<!-- í‘¸í„° -->
<footer>
    <div class="container">
        <div class="footer-nav">
            <a href="#">ê³µì§€ì‚¬í•­</a>
            <a href="#">ì‚¬ìš©ë°©ë²•</a>
            <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
            <a href="#">ê´‘ê³ /ì œíœ´ë¬¸ì˜</a>
            <a href="#">ê°œë°œë¬¸ì˜</a>
            <a href="#">404 Squad</a>
        </div>
        <div>
            lol.ps is hosted by PS Analytics, Inc. This site isn't endorsed by Riot Games and doesnâ€™t reflect their views.
            League of Legends is a trademark of Riot Games.
        </div>
    </div>
</footer>

<script>
    function toggleChatList() {
        alert('ì±„íŒ… ë¦¬ìŠ¤íŠ¸ ì—´ê¸° êµ¬í˜„ í•„ìš”');
    }

    function showTab(tab) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-section').forEach(section => section.classList.add('hidden'));

        document.querySelector(`.tab-btn[onclick*='${tab}']`).classList.add('active');
        document.getElementById(tab).classList.remove('hidden');
    }
</script>

</body>
</html>