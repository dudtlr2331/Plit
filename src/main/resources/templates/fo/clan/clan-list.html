<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í´ëœ ì°¾ê¸°</title>
  <link rel="stylesheet" href="/css/clan.css" />
</head>
<body>
<header>
  <nav>
    <a href="#">íŒŒí‹°ì°¾ê¸°</a>
    <a href="#">ë‚´ì „ì°¾ê¸°</a>
    <a href="/clan" style="color: yellow">í´ëœì°¾ê¸°</a>
    <a href="#">íŠ¸ë¡¤ì‹ ê³ </a>
  </nav>
  <div class="top-right">ğŸ”´ ë¡œê·¸ì¸</div>
</header>

<div class="container">
  <div class="search-bar">

    <form method="get" action="/clan" id="searchForm">
      <div class="search-left">
        <select name="tier" onchange="document.getElementById('searchForm').submit()">
          <option value="">í‹°ì–´ ì „ì²´</option>
          <option value="ì–¸ë­í¬">ì–¸ë­í¬</option>
          <option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option>
          <option value="ì‹¤ë²„">ì‹¤ë²„</option>
          <option value="ê³¨ë“œ">ê³¨ë“œ</option>
          <option value="í”Œë ˆí‹°ë„˜">í”Œë ˆí‹°ë„˜</option>
          <option value="ë‹¤ì´ì•„">ë‹¤ì´ì•„</option>
          <option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option>
          <option value="ì±Œë¦°ì €">ì±Œë¦°ì €</option>
        </select>
        <input type="text" name="keyword" placeholder="í´ëœëª… ë˜ëŠ” ì†Œê°œ ê²€ìƒ‰" />
        <!-- ì´ ê²€ìƒ‰ ë²„íŠ¼ì€ ì„ íƒì‚¬í•­ì´ì§€ë§Œ ë‚¨ê²¨ë‘¬ë„ ë¬´ë°© -->
        <button type="submit" class="register-btn">ê²€ìƒ‰</button>
      </div>
    </form>

    <a href="javascript:void(0);" class="register-btn" onclick="openModal()">í´ëœë“±ë¡</a>
    <div id="clanModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>

        <h2>í´ëœ ë“±ë¡í•˜ê¸°</h2>
        <form method="post" action="/clan/register" enctype="multipart/form-data">
          <input type="text" name="name" placeholder="í´ëœ ì´ë¦„" required />
          <input type="text" name="summonerName" placeholder="ì†Œí™˜ì‚¬ ì´ë¦„" required />
          <label for="imageUpload" class="image-label">ì´ë¯¸ì§€ ë“±ë¡í•˜ê¸°</label>
          <input type="file" id="imageUpload" name="imageFile" accept="image/*" onchange="previewImage(event)" />
          <img id="imagePreview" style="max-width: 100%; margin-top: 10px;" />

          <textarea name="intro" placeholder="í´ëœ ì†Œê°œ" required></textarea>

          <select name="minTier" required>
            <option value="">í‹°ì–´ ì„ íƒ</option>
            <option value="ì–¸ë­í¬">ì–¸ë­í¬</option>
            <option value="ë¸Œë¡ ì¦ˆ">ë¸Œë¡ ì¦ˆ</option>
            <option value="ì‹¤ë²„">ì‹¤ë²„</option>
            <option value="ê³¨ë“œ">ê³¨ë“œ</option>
            <option value="í”Œë ˆí‹°ë„˜">í”Œë ˆí‹°ë„˜</option>
            <option value="ë‹¤ì´ì•„">ë‹¤ì´ì•„</option>
            <option value="ë§ˆìŠ¤í„°">ë§ˆìŠ¤í„°</option>
            <option value="ì±Œë¦°ì €">ì±Œë¦°ì €</option>
          </select>

          <input type="text" name="discordLink" placeholder="ë””ìŠ¤ì½”ë“œ ì´ˆëŒ€ ì£¼ì†Œ" />
          <input type="text" name="kakaoLink" placeholder="ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ì£¼ì†Œ" />

          <div style="text-align: right;">
            <button type="submit" class="register-btn">ë“±ë¡í•˜ê¸°</button>
            <button type="button" class="cancel-btn" onclick="closeModal()">ì·¨ì†Œ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="clan-grid">

    <div class="clan-card" th:each="clan : ${clans}" th:onclick="|location.href='/clan/${clan.id}'|" style="cursor: pointer;">
      <div class="clan-image-placeholder">
        <img th:src="${clan.imageUrl != null ? clan.imageUrl : '/uploads/default.png'}"
             alt="í´ëœ ì´ë¯¸ì§€"
             style="width: 100%; height: 100%; object-fit: cover;" />
      </div>
      <div class="clan-title-box">
        <h3 th:text="${clan.name}">í´ëœì´ë¦„</h3>
        <span class="clan-member-count">0ëª…</span>
      </div>
      <p th:text="${clan.intro}">ì†Œê°œê¸€</p>
      <small>
        <span th:text="'í‹°ì–´ ' + ${clan.minTier} + ' ì´ìƒ'">í‹°ì–´ ë¸Œë¡ ì¦ˆ ì´ìƒ</span>
        <span class="clan-links" style="float: right;">
    <a th:if="${clan.discordLink != null and !#strings.isEmpty(clan.discordLink)}"
       th:href="${clan.discordLink}" target="_blank" onclick="event.stopPropagation()">
      <img src="/images/discord-icon.png" alt="" class="social-icon" />
    </a>
    <a th:if="${clan.kakaoLink != null and !#strings.isEmpty(clan.kakaoLink)}"
       th:href="${clan.kakaoLink}" target="_blank" onclick="event.stopPropagation()">
      <img src="/images/kakao-icon.png" alt="" class="social-icon" />
    </a>
  </span>
      </small>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="footer-nav">
      <a href="#">ê³µì§€ì‚¬í•­</a>
      <a href="#">ì‚¬ìš©ë°©ë²•</a>
      <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
      <a href="#">ê´‘ê³ /ì œíœ´ë¬¸ì˜</a>
      <a href="#">ê°œë°œë¬¸ì˜</a>
      <a href="#">404 Squad</a>
    </div>
    <div>
      lol.ps is hosted by PS Analytics, Inc. This site isn't endorsed by Riot Games and doesnâ€™t reflect their views.
      League of Legends is a trademark of Riot Games.
    </div>
  </div>
</footer>

<script>
  function openModal() {
    document.getElementById("clanModal").style.display = "block";
  }

  function closeModal() {
    document.getElementById("clanModal").style.display = "none";
  }


    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í•¨ìˆ˜
    function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function () {
    const output = document.getElementById('imagePreview');
    output.src = reader.result;
  };
    reader.readAsDataURL(event.target.files[0]);
  }

</script>
</body>
</html>