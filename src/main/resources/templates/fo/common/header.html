<div th:fragment="header"
     xmlns:th="http://www.thymeleaf.org"
     xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

    <header>
        <a th:href="@{/main}" class="logo">Logo</a>

        <nav>
            <a th:href="@{/party}">ํํฐ์ฐพ๊ธฐ</a>
            <a th:href="@{/clan}">ํด๋์ฐพ๊ธฐ</a>
            <a th:href="@{/report}">ํธ๋กค์๊ณ</a>
        </nav>

        <div style="display: flex; align-items: center; gap: 15px;">
            <div onclick="toggleChatList()" style="cursor: pointer; font-size: 30px;">๐ฌ</div>

            <!-- ๋ก๊ทธ์ธ ์ํ -->
            <div sec:authorize="isAuthenticated()" style="display: flex; align-items: center; gap: 10px;">
                <!-- ๋๋ค์ ํ์ (Spring Security Dialect ์ฌ์ฉ) -->
                <span th:text="${#authentication.principal.userNickname}">๋๋ค์</span>

                <button onclick="location.href='/mypage'"
                        style="background: white; color: #ff5a5a; border: 2px solid #ff5a5a;
                   padding: 6px 12px; border-radius: 6px; font-weight: bold; cursor: pointer;
                   transition: all 0.2s ease;"
                        onmouseover="this.style.backgroundColor='#ffebeb';"
                        onmouseout="this.style.backgroundColor='white';">
                    ๋ง์ดํ์ด์ง
                </button>

                <form th:action="@{/logout}" method="post" style="display:inline;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button type="submit"
                            style="background: white;
                   color: #ff5a5a;
                   border: 2px solid #ff5a5a;
                   padding: 6px 12px;
                   border-radius: 6px;
                   font-weight: bold;
                   cursor: pointer;
                   transition: all 0.2s ease;"
                            onmouseover="this.style.backgroundColor='#ffebeb';"
                            onmouseout="this.style.backgroundColor='white';">
                        ๋ก๊ทธ์์
                    </button>
                </form>
            </div>

            <!-- ๋น๋ก๊ทธ์ธ ์ํ -->
            <div sec:authorize="isAnonymous()">
                <button onclick="location.href='/login'"
                        style="background: white; color: #ff5a5a; border: 1px solid #ff5a5a;
                           padding: 6px 12px; border-radius: 6px; font-weight: bold; cursor: pointer;
                           transition: all 0.2s ease;"
                        onmouseover="this.style.backgroundColor='#ffebeb';"
                        onmouseout="this.style.backgroundColor='white';">
                    ๋ก๊ทธ์ธ
                </button>
            </div>
        </div>
    </header>
</div>